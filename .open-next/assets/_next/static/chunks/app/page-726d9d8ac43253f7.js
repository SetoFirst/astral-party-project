(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8974],{2208:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,6874,23)),Promise.resolve().then(a.bind(a,7133))},5695:(e,t,a)=>{"use strict";var s=a(8999);a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}}),a.o(s,"useSearchParams")&&a.d(t,{useSearchParams:function(){return s.useSearchParams}})},7133:(e,t,a)=>{"use strict";a.d(t,{default:()=>n});var s=a(5155),r=a(5695),l=a(2115);let n=()=>{let e=(0,r.useRouter)(),[t,a]=(0,l.useState)(null);(0,l.useEffect)(()=>{(async()=>{let t=await fetch("/api/auth/me");t.ok?a((await t.json()).email):(a(null),e.push("/login"))})()},[e]);let n=async()=>{try{let t=await fetch("/api/auth/logout",{method:"POST",headers:{"Content-Type":"application/json"}});if(!t.ok){let e=await t.json();console.error("Logout failed:",e),alert("ออกจากระบบไม่สำเร็จ กรุณาลองใหม่อีกครั้ง");return}a(null),e.push("/login"),e.refresh()}catch(e){console.error("Error during logout:",e),alert("เกิดข้อผิดพลาดในการออกจากระบบ")}};return(0,s.jsx)("div",{className:"bg-[#555555] w-full",children:(0,s.jsxs)("div",{className:"text-white p-4 flex justify-between items-center max-w-screen-xl mx-auto w-full",children:[(0,s.jsx)("div",{}),(0,s.jsx)("div",{className:"flex gap-4 items-center",children:[{label:"Characters",path:"/"},{label:"Cards",path:"/cards"},{label:"Maps",path:"/map"}].map(t=>(0,s.jsx)("button",{className:"hover:text-pink-500 text-white text-xl cursor-pointer rounded px-4 py-2",onClick:()=>e.push(t.path),"aria-label":"Navigate to ".concat(t.label," page"),children:(0,s.jsx)("b",{children:t.label})},t.label))}),(0,s.jsxs)("div",{className:"flex flex-col items-center text-sm md:text-base",children:[t&&(0,s.jsx)("span",{className:"text-white font-medium mb-1 text-xl",children:t}),(0,s.jsx)("button",{onClick:n,className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded transition duration-300 cursor-pointer text-xl",children:(0,s.jsx)("b",{children:"Logout"})})]})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[6874,8441,1684,7358],()=>t(2208)),_N_E=e.O()}]);