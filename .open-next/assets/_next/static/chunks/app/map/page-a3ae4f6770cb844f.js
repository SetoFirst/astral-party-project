(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5823],{4595:(e,t,a)=>{"use strict";a.d(t,{default:()=>s});var l=a(5155),i=a(2115);function s(){let[e,t]=(0,i.useState)([]),[a,s]=(0,i.useState)(""),[r,n]=(0,i.useState)(!1),[o,d]=(0,i.useState)(!1),[c,u]=(0,i.useState)({id:null,title:"",image:"",description:"",detail:""});(0,i.useEffect)(()=>{let e=localStorage.getItem("detailMapData");if(e)t(JSON.parse(e));else{let e=[{id:1,title:"Start Point",image:"https://static.wikitide.net/astralpartywiki/thumb/9/93/Platform_Mimi.png/70px-Platform_Mimi.png",description:"Heal 2 HP when staying on Start Point. Gain 1 star with enough coins.",detail:"The Start Point Panel is the panel in which the player starts the game. Landing on this panel will heal the player by 2HP..."},{id:2,title:"Check Point",image:"https://static.wikitide.net/astralpartywiki/thumb/2/23/CheckPointPlatform.png/70px-CheckPointPlatform.png",description:"Heal 2 HP when staying on Check Point. Gain 1 star with enough coins.",detail:"The Check Point Panel is a panel that is present only once in all Maps..."}];t(e),localStorage.setItem("detailMapData",JSON.stringify(e))}},[]),(0,i.useEffect)(()=>{e.length>0&&localStorage.setItem("detailMapData",JSON.stringify(e))},[e]);let p=e=>{let{name:t,value:a}=e.target;u({...c,[t]:a})},h=e=>{u(e),d(!0),n(!0)},m=a=>{let l=e.filter(e=>e.id!==a);t(l),localStorage.setItem("detailMapData",JSON.stringify(l))};return(0,l.jsxs)("div",{className:"p-4 max-w-4xl mx-auto",children:[(0,l.jsx)("div",{className:"mb-6",children:(0,l.jsx)("input",{type:"text",placeholder:"Search by Title...",value:a,onChange:e=>s(e.target.value),className:"w-full p-2 border rounded-lg text-lg bg-white"})}),(0,l.jsx)("div",{className:"text-right mb-4",children:(0,l.jsx)("button",{onClick:()=>{d(!1),u({id:null,title:"",image:"",description:"",detail:""}),n(!0)},className:"bg-green-500 text-white px-4 py-2 rounded text-xl font-bold cursor-pointer",children:"Add New Item"})}),r&&(0,l.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:(0,l.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg w-11/12 md:w-1/3",children:[(0,l.jsx)("h3",{className:"text-xl font-bold mb-4",children:o?"Edit Item":"Add New Item"}),(0,l.jsx)("input",{type:"text",name:"title",placeholder:"Title",value:c.title,onChange:p,className:"block w-full mb-3 p-2 border rounded"}),(0,l.jsx)("input",{type:"text",name:"image",placeholder:"Image URL",value:c.image,onChange:p,className:"block w-full mb-3 p-2 border rounded"}),(0,l.jsx)("input",{type:"text",name:"description",placeholder:"Description",value:c.description,onChange:p,className:"block w-full mb-3 p-2 border rounded"}),(0,l.jsx)("textarea",{name:"detail",placeholder:"Full detail",value:c.detail,onChange:p,className:"block w-full mb-3 p-2 border rounded",rows:3}),(0,l.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,l.jsx)("button",{onClick:()=>n(!1),className:"bg-gray-500 text-white px-4 py-2 rounded cursor-pointer",children:"Cancel"}),o?(0,l.jsx)("button",{onClick:()=>{let a=e.map(e=>e.id===c.id?{...c}:e);t(a),localStorage.setItem("detailMapData",JSON.stringify(a)),n(!1),u({id:null,title:"",image:"",description:"",detail:""}),d(!1)},className:"bg-blue-500 text-white px-4 py-2 rounded cursor-pointer",children:"Update"}):(0,l.jsx)("button",{onClick:()=>{if(!c.title||!c.image)return alert("Please fill required fields");let a=[...e,{...c,id:Date.now()}];t(a),localStorage.setItem("detailMapData",JSON.stringify(a)),n(!1),u({id:null,title:"",image:"",description:"",detail:""})},className:"bg-green-500 text-white px-4 py-2 rounded cursor-pointer",children:"Save"})]})]})}),(0,l.jsx)("div",{className:"space-y-8",children:e.filter(e=>e.title.toLowerCase().includes(a.toLowerCase())).map(e=>(0,l.jsx)("div",{className:"border rounded-lg p-4 shadow-sm hover:bg-gray-100 transition duration-700 ease-in-out",children:(0,l.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,l.jsx)("div",{className:"font-bold text-xl",children:e.title}),(0,l.jsx)("img",{src:e.image,alt:e.title,className:"w-[100px] my-3"}),(0,l.jsx)("button",{className:"bg-white text-xl py-2 px-4 rounded-[20px] border mb-3",children:e.description}),(0,l.jsx)("div",{className:"text-sm text-gray-700",children:e.detail}),(0,l.jsxs)("div",{className:"mt-4 space-x-2",children:[(0,l.jsx)("button",{onClick:()=>h(e),className:"bg-yellow-500 text-white px-3 py-1 rounded text-xl font-bold cursor-pointer",children:"Edit"}),(0,l.jsx)("button",{onClick:()=>{var t;return m(null!=(t=e.id)?t:0)},className:"bg-red-500 text-white px-3 py-1 rounded text-xl font-bold cursor-pointer",children:"Delete"})]})]})},e.id))})]})}},5695:(e,t,a)=>{"use strict";var l=a(8999);a.o(l,"useRouter")&&a.d(t,{useRouter:function(){return l.useRouter}}),a.o(l,"useSearchParams")&&a.d(t,{useSearchParams:function(){return l.useSearchParams}})},7133:(e,t,a)=>{"use strict";a.d(t,{default:()=>r});var l=a(5155),i=a(5695),s=a(2115);let r=()=>{let e=(0,i.useRouter)(),[t,a]=(0,s.useState)(null);(0,s.useEffect)(()=>{(async()=>{let t=await fetch("/api/auth/me");t.ok?a((await t.json()).email):(a(null),e.push("/login"))})()},[e]);let r=async()=>{try{let t=await fetch("/api/auth/logout",{method:"POST",headers:{"Content-Type":"application/json"}});if(!t.ok){let e=await t.json();console.error("Logout failed:",e),alert("ออกจากระบบไม่สำเร็จ กรุณาลองใหม่อีกครั้ง");return}a(null),e.push("/login"),e.refresh()}catch(e){console.error("Error during logout:",e),alert("เกิดข้อผิดพลาดในการออกจากระบบ")}};return(0,l.jsx)("div",{className:"bg-[#555555] w-full",children:(0,l.jsxs)("div",{className:"text-white p-4 flex justify-between items-center max-w-screen-xl mx-auto w-full",children:[(0,l.jsx)("div",{}),(0,l.jsx)("div",{className:"flex gap-4 items-center",children:[{label:"Characters",path:"/"},{label:"Cards",path:"/cards"},{label:"Maps",path:"/map"}].map(t=>(0,l.jsx)("button",{className:"hover:text-pink-500 text-white text-xl cursor-pointer rounded px-4 py-2",onClick:()=>e.push(t.path),"aria-label":"Navigate to ".concat(t.label," page"),children:(0,l.jsx)("b",{children:t.label})},t.label))}),(0,l.jsxs)("div",{className:"flex flex-col items-center text-sm md:text-base",children:[t&&(0,l.jsx)("span",{className:"text-white font-medium mb-1 text-xl",children:t}),(0,l.jsx)("button",{onClick:r,className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded transition duration-300 cursor-pointer text-xl",children:(0,l.jsx)("b",{children:"Logout"})})]})]})})}},8112:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,6874,23)),Promise.resolve().then(a.bind(a,4595)),Promise.resolve().then(a.bind(a,7133))}},e=>{var t=t=>e(e.s=t);e.O(0,[6874,8441,1684,7358],()=>t(8112)),_N_E=e.O()}]);